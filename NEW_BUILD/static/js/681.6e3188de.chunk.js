"use strict";(self.webpackChunkresobin=self.webpackChunkresobin||[]).push([[681],{681:function(e,t,n){n.d(t,{z1:function(){return Me},Zl:function(){return We},W$:function(){return He}});var r,o,i,c=n(3433),a=n(5861),s=n(9439),l=n(7691),u=n(4687),d=n.n(u),m=n(7106),f=n(2571),h=n(492),p=n(295),g=n(7083),v=n(3441),x=n(4569),w=n.n(x),b=n(2791),j=n(6030),y=n(3504),k=n(718),C=n(5714),Z=n(3997),S=n(6647),I=n(238),A=n(1943),T=n(4872),E=n(8519),R=n(184),z=function(e){var t=e.mode,n=void 0===t?"vertical":t,r=e.circleDiameter,o=void 0===r?"0.5rem":r,i=e.lineThickness,c=void 0===i?"0.1rem":i,a=new Date,s=String(30*Math.floor(a.getMinutes()/30)),l=String(a.getHours()),u=a.getDay(),d="".concat(l.padStart(2,"0")).concat(s.padStart(2,"0"));return d>"0830"&&d<"2100"&&u>1&&u<7&&(0,R.jsxs)(P,{mode:n,column:"col-".concat(u),row:"time-".concat(d),children:[(0,R.jsx)(N,{diameter:o,mode:n}),(0,R.jsx)(B,{thickness:c,mode:n})]})},P=l.ZP.div.withConfig({componentId:"sc-10sksbn-0"})(["position:relative;grid-row:",";grid-column:",";width:",";height:",";&:hover{opacity:0.2;}"],(function(e){return e.row}),(function(e){return e.column}),(function(e){return"vertical"===e.mode?"100%":"0"}),(function(e){return"vertical"!==e.mode?"100%":"0"})),N=l.ZP.div.withConfig({componentId:"sc-10sksbn-1"})(["position:absolute;top:calc(-"," / 2);left:calc(-"," / 2);width:calc(",");height:calc(",");background:",";border-radius:50%;"],(function(e){return e.diameter}),(function(e){return e.diameter}),(function(e){return e.diameter}),(function(e){return e.diameter}),(function(e){return e.theme.logo})),B=l.ZP.div.withConfig({componentId:"sc-10sksbn-2"})(["position:absolute;top:calc( -"," / 2 );left:calc( -"," / 2 );width:",";height:",";background:",";"],(function(e){var t=e.mode,n=e.thickness;return"vertical"===t?n:0}),(function(e){var t=e.mode,n=e.thickness;return"vertical"!==t?n:0}),(function(e){var t=e.mode,n=e.thickness;return"vertical"!==t?n:"100%"}),(function(e){var t=e.mode,n=e.thickness;return"vertical"===t?n:"100%"}),(function(e){return e.theme.logo})),M=n(168),D=n(3791),L=n(5606),O=n(5298),U=n(9411),F=function(e){var t=e.data,n=e.keyProp,r=(0,A.ID)(),o=(0,b.useCallback)((function(e){var n=e.gridCol,o=e.gridRow;e.slotName,e.isTutorial,e.venue;return(0,R.jsx)(V,{row:o,col:n,children:(0,R.jsx)(Q,{color:r((0,I.vp)(D.Z)),children:(0,R.jsxs)("h3",{style:{paddingRight:"1rem"},children:[t[0],t[1]&&" | ".concat(t[1])]})})})}),[t,D.Z,r]),i=[{slot:n,grid:S.hM[n],isTutorial:!0}];return null===i||void 0===i?void 0:i.map((function(e,t){var n=e.slot,r=e.grid,i=e.isTutorial;return(0,R.jsx)(o,{gridCol:S.y6[r.col-1],gridRow:{start:S.ik[r.row.start],end:S.ik[r.row.end]},slotName:n,isTutorial:i},String(t)+String(n))}))},V=l.ZP.div.withConfig({componentId:"sc-120sra1-0"})(["grid-row:"," / ",";grid-column:",";position:relative;&:hover{text-decoration:none;}"],(function(e){return e.row.start.id}),(function(e){return e.row.end.id}),(function(e){return e.col.id})),Q=l.ZP.div.withConfig({componentId:"sc-120sra1-1"})(["height:100%;padding:0.25rem 0.5rem;border-radius:",";cursor:pointer;transition:all 200ms ease-out;"," & > h3{font-size:",";}& > span{display:block;font-size:",";}&:hover{box-shadow:0 0 0.5rem rgb(0 0 0 / 40%);}"],(function(e){return e.theme.borderRadius}),(function(e){return function(e){return(0,l.iv)(r||(r=(0,M.Z)(["\n  color: ",";\n  background: ",";\n  border-left: 4px solid ",";\n"])),(function(e){return e.theme.darksecondary}),(0,O.$v)(e),(0,L._j)(.2,e))}(e.color)}),U.JB.responsive.sm,U.JB.responsive.xs),H=n(8087),X=n(4598),q=function(e){var t=e.data,n=t.id,r=t.course,o=t.lectureSlots,i=t.tutorialSlots,c=t.lectureVenue,a=(0,j.v9)((0,T.Wz)(r)),s=(0,A.ID)(),l=(0,b.useCallback)((function(){window.location.href=(0,I.wc)(r,a)}),[r,a]),u=function(e,t,n){return""===n||!0===t?"".concat(e):"".concat(e," | ").concat(n)},d=(0,b.useCallback)((function(e){var t=e.gridCol,o=e.gridRow,i=e.slotName,d=e.isTutorial;e.venue;return(0,R.jsx)(_,{row:o,col:t,children:(0,R.jsx)(X.Z,{title:a,children:(0,R.jsx)(J,{color:s((0,I.vp)(n)),children:(0,R.jsx)("div",{className:"item-content",children:(0,R.jsxs)("div",{className:"details-row",children:[(0,R.jsxs)("h3",{style:{paddingRight:"1rem"},children:[r," | ",i,(0,R.jsx)(k.Ei,{size:"small",onClick:l,icon:(0,R.jsx)(H.d,{size:"16"}),color:"#000000",style:{position:"absolute",bottom:"2.5rem",left:"7.3rem"}})]}),(0,R.jsxs)("div",{className:"info-row",children:[(0,R.jsx)("span",{children:u(o.start.title,d,c)}),d&&(0,R.jsx)("span",{className:"tutorial-label",children:"(Tutorial)"})]})]})})})})})}),[r,n,a,s,l,c]);if(0===(null===o||void 0===o?void 0:o.length))return null;var m=o.map((function(e){return{slot:e,grid:S.hM[e],isTutorial:!1}})).concat(i.map((function(e){return{slot:e,grid:S.hM[e],isTutorial:!0}})));return null===m||void 0===m?void 0:m.map((function(e,t){var n=e.slot,r=e.grid,o=e.isTutorial;return(0,R.jsx)(d,{gridCol:S.y6[r.col-1],gridRow:{start:S.ik[r.row.start],end:S.ik[r.row.end]},slotName:n,isTutorial:o,lectureVenue:c},String(t)+String(n))}))},_=l.ZP.div.withConfig({componentId:"sc-1d4inze-0"})(["grid-row:"," / ",";grid-column:",";position:relative;&:hover{text-decoration:none;}"],(function(e){return e.row.start.id}),(function(e){return e.row.end.id}),(function(e){return e.col.id})),J=l.ZP.div.withConfig({componentId:"sc-1d4inze-1"})(["height:100%;padding:0.25rem 0.5rem;border-radius:",";cursor:pointer;transition:all 200ms ease-out;"," .item-content{position:relative;display:flex;flex-direction:column;justify-content:flex-start;height:100%;width:100%;}& > .item-content > div{display:flex;flex-direction:column;}.item-content > .details-row > .info-row{display:flex;align-items:center;width:100%;}.item-content > .details-row > .info-row > .tutorial-label{margin-left:auto;font-size:",";font-weight:500;white-space:nowrap;align-self:flex-end;}.item-content > .details-row > .info-row > .slot-name{margin-left:auto;margin-top:0.5rem;margin-right:0.5rem;font-size:",";font-weight:bold;color:",";white-space:nowrap;display:flex;align-items:center;}& > .item-content > .slot-name{position:absolute;right:0.5rem;bottom:0.25rem;font-size:",";color:",";white-space:nowrap;margin-left:0;}& > .item-content h3{font-size:",";}& > .item-content span{display:block;font-size:",";}&:hover{box-shadow:0 0 0.5rem rgb(0 0 0 / 40%);}"],(function(e){return e.theme.borderRadius}),(function(e){return function(e){return(0,l.iv)(o||(o=(0,M.Z)(["\n  color: ",";\n  background: ",";\n  border-left: 4px solid ",";\n"])),(function(e){return e.theme.darksecondary}),(0,O.$v)(e),(0,L._j)(.2,e))}(e.color)}),U.JB.responsive.xs,U.JB.responsive.sm,(function(e){return e.theme.darksecondary}),U.JB.responsive.xs,(function(e){return e.theme.darksecondary}),U.JB.responsive.sm,U.JB.responsive.xs),G=n(7913),W=n(9333),Y=n(2385),$=n(5498),K=n.n($),ee=function(e){var t=e.coursesInTimetable,n=(0,j.v9)(T.t_),r=function(e){return"".concat(e.replace(/[.:-]/g,"").slice(0,-4),"Z")},o=function(e,t,n,o,i,c){var a=new Date,s=new Date;return a.setHours(e.hours),a.setMinutes(e.minutes),s.setHours(t.hours),s.setMinutes(t.minutes),"BEGIN:VEVENT\nUID:".concat(o+e.hours+n,"\nDTSTART:").concat(r(a.toISOString()),"\nDTEND:").concat(r(s.toISOString()),"\nRRULE:FREQ=WEEKLY;BYDAY=").concat(n,"\nSUMMARY:").concat(o,"\nLOCATION:").concat(c,"\nDESCRIPTION:").concat(i,"\nEND:VEVENT\n")},i=(0,R.jsxs)(W.Z,{theme:"dark",children:[(0,R.jsx)(W.Z.Item,{children:(0,R.jsx)("a",{href:function(e){var t="BEGIN:VCALENDAR\nCALSCALE:GREGORIAN\nMETHOD:PUBLISH\nPRODID:-//Test Cal//EN\nVERSION:2.0\n".concat(e.join(""),"\nEND:VCALENDAR\n"),n=new File([t],"semestertimetable.ics",{type:"text/calendar;charset=utf8"});return window.URL.createObjectURL(n)}(function(){var e,r=null===t||void 0===t?void 0:t.map((function(e){return function(e){var t=e.course,r=e.lectureSlots,i=e.tutorialSlots,c=e.lectureVenue,a=n.find((function(t){return(null===t||void 0===t?void 0:t.code)===e.course})),s=r.map((function(e){return{slot:e,grid:S.hM[e]}})),l=i.map((function(e){return{slot:e,grid:S.hM[e]}})),u=s.map((function(e,n){e.slot;var r=e.grid,i=S.ik[r.row.start].title.split(":"),s=S.ik[r.row.end].title.split(":"),l=S.y6[r.col-1].title.slice(0,2).toUpperCase();return o({hours:i[0],minutes:i[1]},{hours:s[0],minutes:s[1]},l,t,a.title,c)})),d=l.map((function(e,n){e.slot;var r=e.grid,i=S.ik[r.row.start].title.split(":"),c=S.ik[r.row.end].title.split(":"),s=S.y6[r.col-1].title.slice(0,2).toUpperCase();return o({hours:i[0],minutes:i[1]},{hours:c[0],minutes:c[1]},s,t,a.title,"")}));return u.concat(d)}(e)}));return(e=[]).concat.apply(e,(0,c.Z)(r))}()),target:"_blank",rel:"noreferrer",download:!0,children:"Google Calendar (.ics file)"})},"ics"),(0,R.jsx)(W.Z.Item,{onClick:function(){return function(e){var t=e.cloneNode(!0);return t.setAttribute("style","width: 1250px; height: 700px; overflow: hidden;"),document.body.appendChild(t),K()(t.children[0]).then((function(e){var t=e.toDataURL("image/png"),n=document.createElement("a");return n.href=t,n.download="TimeTable.png",n.click(),"Download started"})).catch((function(e){throw new Error("Download failed: ".concat(e))})).finally((function(){return document.body.removeChild(t)}))}(document.getElementById("timetable-layout-wrapper"))},children:"Image (.png file)"},"png")]});return(0,R.jsx)(Y.Z,{overlay:i,trigger:["click"],children:(0,R.jsx)(k.Ei,{icon:(0,R.jsx)(G.U,{size:"22"}),onClick:function(){},tooltip:"Download timetable",hoverstyle:{background:"rgba(0, 0, 0, 0.3)"}})})},te=function(e){var t=e.id,n=e.title;return(0,R.jsx)(ie,{id:t,children:n})},ne=function(e){var t=e.id,n=e.title;return(0,R.jsx)(ce,{id:t,children:n})},re=function(e){var t=e.children;return(0,R.jsx)("div",{id:"timetable-layout-wrapper",children:(0,R.jsxs)(oe,{children:[S.y6.map((function(e,t){var n=e.id,r=e.title;return(0,R.jsx)(te,{id:n,title:r},n)})),S.ik.map((function(e,t){var n=e.id,r=e.title;return t%2===0&&(0,R.jsx)(ne,{id:n,title:r},n)})),S.y6.map((function(e,t){return S.ik.map((function(t,n){return(0,R.jsx)(ae,{row:t,col:e,j:n},t.id)}))})),t]})})},oe=l.ZP.div.withConfig({componentId:"sc-4uq15v-0"})(["display:grid;grid-template-rows:[tracks] 2rem ",";grid-template-columns:[times] 2.5rem ",";margin-bottom:1rem;padding:0.75rem;overflow-x:scroll;background:",";border-radius:",";> div{box-shadow:inset -1px -1px 0 ",";}"],S.ik.map((function(e,t){var n=e.id;e.title;return"[".concat(n,"] 1fr ")})),S.y6.map((function(e,t){var n=e.id;e.title;return"[".concat(n,"] 1fr ")})),(function(e){return e.theme.secondary}),(function(e){return e.theme.borderRadius}),(function(e){var t=e.theme;return(0,L.m4)(t.primary,.1)})),ie=l.ZP.span.withConfig({componentId:"sc-4uq15v-1"})(["display:flex;grid-row:tracks;grid-column:",";align-items:center;justify-content:center;padding:0 1rem;color:",";font-weight:500;font-size:0.75rem;text-transform:uppercase;background:",";"],(function(e){return e.id}),(function(e){return e.theme.textColor}),(function(e){return e.theme.secondary})),ce=l.ZP.span.withConfig({componentId:"sc-4uq15v-2"})(["position:relative;top:-0.4rem;right:0.75rem;display:flex;grid-row:",";grid-column:times;justify-content:flex-end;color:",";font-size:0.5rem;font-family:Roboto,monospace;"],(function(e){return e.id}),(function(e){return e.theme.textColor})),ae=l.ZP.div.withConfig({componentId:"sc-4uq15v-3"})(["grid-row:",";grid-column:",";min-height:1.5rem;"],(function(e){return e.row.id}),(function(e){return e.col.id})),se=n(1413),le=n(5987),ue=n(6076),de=n(177),me=n(731),fe=["Icon","className"],he=function(e){var t=e.loading,n=e.setLoading,r=e.data,o=e.addToTimetable,i=(0,A.Fs)().isDesktop,c=(0,A.Nc)(),a=c.deleteQueryString,l=c.getQueryString,u=c.setQueryString,d=(0,j.v9)(me.h1),f=(0,b.useState)(l("q")),h=(0,s.Z)(f,2),p=h[0],g=h[1],v=function(e){if(!r)return[];var t=e?e.toLowerCase():"",n=[];return r.forEach((function(e){var r=e.code,o=e.semester;if(r.toLowerCase().includes(t)&&o.length>0){var i=o[0].timetable;i.length>0?i.forEach((function(e){var t=e.id,o=e.division,i=e.lectureSlots,c=e.tutorialSlots,a={id:t,value:"".concat(r," - ").concat(o),link:"/courses/".concat(r)};i.length>0&&c.length>0?a.value+=" - ".concat(i.join(", ")," - ").concat(c.join(", ")):i.length>0?a.value+=" - ".concat(i.join(", ")):c.length>0&&(a.value+=" - ".concat(c.join(", "))),n.push(a)})):n.push({id:-1,value:r,link:"/courses/".concat(r)})}})),n}(p);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(pe,{}),(0,R.jsxs)(ge,{children:[d&&i&&(0,R.jsx)(we,{}),(0,R.jsx)(xe,{size:"large",placeholder:"Course Code or Title",allowClear:!0,value:p,onChange:function(e){return t=e.target.value,n(!0),g(t),u("q",t),void a("p");var t},prefix:(0,R.jsx)(ve,{Icon:t?m.Z:ue.o})}),p&&v.length>0&&(0,R.jsx)(be,{children:v.map((function(e){return(0,R.jsxs)(je,{onClick:function(){window.location.href=e.link},children:[e.value,(0,R.jsx)(ye,{onClick:function(t){t.stopPropagation(),o(e.value,e.id),a("q"),g("")},children:"\u26a1 Add"})]},e.value)}))})]})]})},pe=(0,l.vJ)(i||(i=(0,M.Z)(["\n  .ant-select-dropdown {\n    min-height: 200px;\n  }\n"]))),ge=l.ZP.div.withConfig({componentId:"sc-uowx2r-0"})(["position:sticky;top:",";z-index:6;display:flex;align-items:center;justify-content:center;height:3rem;background:linear-gradient( 0deg,"," 0%,"," 30%,"," 50% );"],(function(e){return e.theme.headerHeight}),(function(e){var t=e.theme;return(0,L.m4)(t.darksecondary,0)}),(function(e){var t=e.theme;return(0,L.m4)(t.darksecondary,0)}),(function(e){var t=e.theme;return(0,L.m4)(t.darksecondary,1)})),ve=(0,l.ZP)((function(e){var t=e.Icon,n=e.className,r=(0,le.Z)(e,fe);return(0,R.jsx)(t,(0,se.Z)((0,se.Z)({},r),{},{className:n}))})).withConfig({componentId:"sc-uowx2r-1"})(["width:1rem;margin-right:0.5rem;color:lightgray;"]),xe=(0,l.ZP)(de.Z).withConfig({componentId:"sc-uowx2r-2"})(["z-index:10 !important;height:2rem;padding:0 0.75rem;background:",";border:0;border-radius:",";box-shadow:0 8px 5px rgb(0 0 0 / 30%);.ant-input{padding:0 0.25rem;color:lightgray;font-weight:400;font-size:0.875rem;background:",";}.anticon-close-circle > svg{width:0.875rem;height:0.875rem;color:lightgray;}"],(function(e){return e.theme.secondary}),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.secondary})),we=l.ZP.div.withConfig({componentId:"sc-uowx2r-3"})(["position:fixed;inset:0;z-index:4;background:rgb(0 0 0 / 55%);"]),be=l.ZP.div.withConfig({componentId:"sc-uowx2r-4"})(["position:absolute;top:100%;left:0;width:100%;background-color:",";border:1px solid ",";border-top:none;border-radius:0 0 "," ",";box-shadow:0 8px 5px rgb(0 0 0 / 30%);"],(function(e){return e.theme.secondary}),(function(e){return e.theme.borderColor}),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.borderRadius})),je=l.ZP.div.withConfig({componentId:"sc-uowx2r-5"})(["position:relative;padding:0.5rem;cursor:pointer;color:lightgray;&:hover{background-color:",";}"],(function(e){return e.theme.secondaryHover})),ye=l.ZP.button.withConfig({componentId:"sc-uowx2r-6"})(["position:absolute;top:50%;right:0.5rem;transform:translateY(-50%);background-color:",";color:",";border:none;padding:0.25rem 0.5rem;border-radius:9999px;font-size:0.875rem;font-weight:bold;cursor:pointer;&:hover{background-color:",";}"],(function(e){return e.theme.secondary}),(function(e){return e.theme.primary}),(function(e){return e.theme.secondaryHover})),ke=n(856),Ce=n(9930),Ze=n(3374),Se=n(6611),Ie=n(7309),Ae=n(2524),Te=n.n(Ae),Ee=function(e){var t=e.coursesInTimetable,n=(0,b.useState)(!1),r=(0,s.Z)(n,2),o=r[0],i=r[1],c=(0,b.useMemo)((function(){var e=t.map((function(e){return e.id})),n=new URLSearchParams({ids:e});return"".concat(window.location.origin,"/timetable/share?").concat(n.toString())}),[t]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(k.Ei,{icon:(0,R.jsx)(Ce.m,{size:"22"}),onClick:function(){i(!0)},tooltip:"Share Timetable as Link",hoverstyle:{background:"rgba(0, 0, 0, 0.3)"}}),(0,R.jsx)(k.u_,{title:(0,R.jsxs)("h2",{children:["Share Your Timetable ",(0,R.jsx)("b",{children:"(beta)"})]}),footer:null,visible:o,onCancel:function(){i(!1)},children:(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",alignItems:"center"},children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("h3",{children:"Send this link to a friend to show them your timetable!"}),(0,R.jsxs)(de.Z.Group,{style:{display:"flex",marginTop:"0.75rem"},children:[(0,R.jsx)(Re,{readOnly:!0,value:c}),(0,R.jsx)(ze,{onClick:function(){return(0,I.vQ)(c)},icon:(0,R.jsx)(Ze.M,{size:"20"})})]})]}),(0,R.jsx)(Te(),{value:c,includeMargin:!0,level:"Q",imageSettings:{src:"/mstile-144x144.png",excavate:!0,width:20,height:20},bgColor:"#1B1728",fgColor:"#807da0",height:192,width:192,renderAs:"svg",style:{borderRadius:"0.5rem"}}),(0,R.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,R.jsx)("h3",{children:"Share via:"}),(0,R.jsx)(k.Ei,{icon:(0,R.jsx)(ke.C,{size:"24"}),onClick:function(){var e=new URLSearchParams({text:"Here's my timetable: ".concat(c)});window.open("https://api.whatsapp.com/send?".concat(e.toString()),"_blank","noopener noreferrer")},tooltip:"Share via WhatsApp"}),(0,R.jsx)(k.Ei,{icon:(0,R.jsx)(Se.M,{size:"24"}),onClick:function(){var e=new URLSearchParams({subject:"ResoBin timetable",body:"My timetable can be found at ".concat(c)});window.open("mailto:?".concat(e.toString()))},tooltip:"Share via Mail"})]})]})})]})},Re=(0,l.ZP)(de.Z).withConfig({componentId:"sc-1i5aeh1-0"})(["color:",";background:",";border-radius:",";border:1px solid ",";font-size:1rem;font-weight:500;overflow-x:scroll;white-space:nowrap;height:2rem;&:hover,&:focus{border-color:",";box-shadow:0 0 1rem ",";}&.ant-input{width:100%;}"],(function(e){return e.theme.textColor}),(function(e){return e.theme.darksecondary}),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.placeholder}),(function(e){return e.theme.logo}),(function(e){var t=e.theme;return(0,L.m4)(t.logo,.2)})),ze=(0,l.ZP)(Ie.Z).withConfig({componentId:"sc-1i5aeh1-1"})(["border:1px solid ",";border-radius:",";border-top-left-radius:0;border-bottom-left-radius:0;background:",";color:",";&:hover,&:focus{background:",";color:",";border-color:",";box-shadow:0 0 1rem ",";}"],(function(e){return e.theme.placeholder}),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.darksecondary}),(function(e){return e.theme.textColor}),(function(e){return e.theme.logo}),(function(e){return e.theme.darksecondary}),(function(e){return e.theme.logo}),(function(e){var t=e.theme;return(0,L.m4)(t.logo,.2)})),Pe=function(e){var t=e.course,n=e.handleRemove,r=e.loading,o=null!==t&&void 0!==t?t:{},i=o.code,c=o.title,a=o.credits;return(0,R.jsx)(Ne,{to:(0,I.wc)(i,c),children:(0,R.jsx)(k.Zb,{hoverable:!0,children:(0,R.jsx)(k.Zb.Meta,{title:(0,R.jsxs)(Ue,{children:[i,(0,R.jsx)(C.t7,{tooltip:"Remove from timetable",icon:(0,R.jsx)(f.X,{size:"24"}),onClick:n,disabled:r,hoverstyle:{background:"rgba(0, 0, 0, 0.3)"}})]}),description:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("span",{children:c}),(0,R.jsx)("br",{}),(0,R.jsxs)("span",{children:["Credits: ",a]})]})})})})},Ne=(0,l.ZP)(y.rU).withConfig({componentId:"sc-78v9po-0"})(["&:hover{text-decoration:none;}"]),Be=null,Me=function(){var e=(0,j.I0)(),t=(0,j.v9)(T.s7),n=(0,j.v9)(T.Fp),r=(0,b.useState)([]),o=(0,s.Z)(r,2),i=o[0],l=o[1],u=(0,b.useState)([]),f=(0,s.Z)(u,2),x=f[0],y=f[1],P=(0,b.useState)({}),N=(0,s.Z)(P,2),B=N[0],M=N[1],D=(0,b.useState)(n),L=(0,s.Z)(D,2),O=L[0],U=L[1],V=(0,b.useState)(null),Q=(0,s.Z)(V,2),H=Q[0],X=Q[1],_=(0,A.Nc)().getQueryString,J=(0,b.useState)(!0),G=(0,s.Z)(J,2),W=G[0],Y=G[1],$=function(){var e=(0,a.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!0),e.prev=1,Be&&Be.cancel(),Be=w().CancelToken.source(),e.next=6,Z.bl.courses.list({params:t,cancelToken:Be.token});case 6:n=e.sent,y(n.results),e.next=15;break;case 10:if(e.prev=10,e.t0=e.catch(1),!w().isCancel(e.t0)){e.next=14;break}return e.abrupt("return");case 14:(0,k.Am)({status:"error",content:e.t0});case 15:Y(!1);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();(0,b.useEffect)((function(){var e={search_fields:"code,title,description",q:_().q};$(e)}),[_]),(0,b.useEffect)((function(){t.length&&X(t.length-1)}),[t]);var K=(0,b.useCallback)(function(){var e=(0,a.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(!0),e.next=4,Z.bl.profile.timetable.read(t);case 4:n=e.sent,l(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(0,k.Am)({status:"error",content:e.t0});case 11:return e.prev=11,U(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),[]);(0,b.useEffect)((function(){null!==H?K(t[H]):U(!0)}),[K,t,H]);var te=function(t){return(0,a.Z)(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,U(!0),n.next=4,Z.bl.profile.timetable.remove({id:t});case 4:l(i.filter((function(e){return e.id!==t}))),e((0,E.Fp)(t)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),(0,k.Am)({status:"error",content:n.t0});case 11:return n.prev=11,U(!1),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[0,8,11,14]])})))},ne=function(){var e=(0,a.Z)(d().mark((function e(n,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==r){e.next=4;break}(0,k.Am)({status:"error",content:"No TimeTable Found For ".concat(n," for current semester")}),e.next=15;break;case 4:return e.prev=4,e.next=7,Z.bl.profile.timetable.add({id:r});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),(0,k.Am)({status:"error",content:e.t0});case 12:return e.prev=12,K(t[H]),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[4,9,12,15]])})));return function(t,n){return e.apply(this,arguments)}}();(0,b.useEffect)((function(){var e=function(){var e=(0,a.Z)(d().mark((function e(){var t,n,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(!0),t=i.map((function(e){return e.course})),n=t.map(function(){var e=(0,a.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.bl.courses.read({code:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(n);case 6:r=e.sent,o={},r.forEach((function(e){o[e.code]=e})),M(o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,k.Am)({status:"error",content:e.t0});case 15:return e.prev=15,U(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(){return e.apply(this,arguments)}}();e()}),[i]);var oe=Object.values(B).filter((function(e){return!0===e.isHalfSemester})).map((function(e){var t=e.code,n=e.semester;return{code:t,lectureSlots:n.flatMap((function(e){return e.timetable.flatMap((function(e){return e.lectureSlots}))})),tutorialSlots:n.flatMap((function(e){return e.timetable.flatMap((function(e){return e.tutorialSlots}))}))}})),ie=Object.entries(function(e){var t=e.reduce((function(e,t){return t.lectureSlots.forEach((function(n){e.has(n)?e.get(n).add(t.code):e.set(n,new Set([t.code]))})),e}),new Map);return t.forEach((function(e,t,n){n.set(t,Array.from(e))})),Object.fromEntries(t)}((0,c.Z)(oe))),ce=function(e){var t=[];return Array.isArray(oe)&&e.forEach((function(e){var n=e.first,r=e.second,o=oe.some((function(e){return e.code===n.course})),i=oe.some((function(e){return e.code===r.course}));o&&i||t.push("".concat(n.course," (Slot ").concat(n.slotName,") is clashing with ").concat(r.course," (Slot ").concat(r.slotName,")"))})),t}(function(){var e=[];i.forEach((function(t){var n=t.course;t.lectureSlots.forEach((function(t){e.push({course:n,slotName:t})}))}));for(var t=e.map((function(e){var t=e.course,n=e.slotName;return{course:t,slotName:n,grid:S.hM[n]}})).sort((function(e,t){return 1e3*e.grid.col+e.grid.row.start-(1e3*t.grid.col+t.grid.row.start)})),n=[],r=1;r<t.length;r+=1){var o=t[r-1],c=t[r];o.grid.col===c.grid.col&&o.grid.row.end>c.grid.row.start&&n.push({first:t[r-1],second:t[r]})}return n}());return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(k.CD,{children:(0,R.jsx)(k.V1,{children:"Timetable"})}),t[H]&&(0,R.jsxs)(De,{children:[(0,R.jsx)(ee,{coursesInTimetable:i}),(0,R.jsxs)(Le,{children:[(0,R.jsx)(C.Ei,{icon:(0,R.jsx)(h.s,{size:"20"}),onClick:function(){return H-1 in t&&X(H-1)},disabled:O||!(H-1 in t),hoverstyle:{background:"rgba(0, 0, 0, 0.3)"}}),t[H].season,"\xa0",(0,I.Mz)(t[H]),(0,R.jsx)(C.Ei,{icon:(0,R.jsx)(p._,{size:"20"}),disabled:O||!(H+1 in t),onClick:function(){return H+1 in t&&X(H+1)},hoverstyle:{background:"rgba(0, 0, 0, 0.3)"}})]}),(0,R.jsx)(Ee,{coursesInTimetable:i})]}),(0,R.jsx)(he,{loading:W,setLoading:Y,data:x,addToTimetable:ne}),O&&(0,R.jsx)(k.Tc,{}),(0,R.jsx)(g.Z,{spinning:O,indicator:(0,R.jsx)(m.Z,{style:{fontSize:24},spin:!0}),children:(0,R.jsxs)(re,{children:[i.map((function(e){return oe.some((function(t){return t.code===e.course}))?null:(0,R.jsx)(q,{data:e},e.id)})),ie.map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return(0,R.jsx)(F,{keyProp:n,data:r})})),(0,R.jsx)(z,{mode:"vertical"})]})}),(0,R.jsxs)(k.xN,{title:"My courses",loading:O,children:[(0,R.jsxs)(Fe,{children:["Total credits:"," ",Object.values(B).reduce((function(e,t){return e+t.credits}),0)]}),(0,R.jsx)(Ve,{children:!O&&ce.map((function(e){return(0,R.jsx)(v.Z,{message:"Warning",description:e,type:"warning",showIcon:!0,closable:!0})}))}),(0,R.jsx)(Oe,{children:!O&&i.map((function(e){var t=e.id,n=e.course;return(0,R.jsx)(Pe,{course:B[n],handleRemove:te(t),loading:O},t)}))})]})]})},De=l.ZP.div.withConfig({componentId:"sc-78v9po-1"})(["display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;"]),Le=l.ZP.div.withConfig({componentId:"sc-78v9po-2"})(["display:flex;gap:0.5rem;align-items:center;color:",";font-size:1.25rem;text-transform:capitalize;"],(function(e){return e.theme.textColor})),Oe=l.ZP.div.withConfig({componentId:"sc-78v9po-3"})(["display:flex;flex-direction:column;gap:0.75rem;width:13.6rem;"]),Ue=l.ZP.div.withConfig({componentId:"sc-78v9po-4"})(["display:flex;align-items:center;justify-content:space-between;width:100%;"]),Fe=l.ZP.span.withConfig({componentId:"sc-78v9po-5"})(["margin-top:1rem;color:",";font-weight:bold;"],(function(e){return e.theme.primary})),Ve=l.ZP.div.withConfig({componentId:"sc-78v9po-6"})(["margin-top:1rem;"]),Qe=n(6871),He=function(){var e=(0,A.Nc)().getQueryString,t=(0,b.useState)([]),n=(0,s.Z)(t,2),r=n[0],o=n[1],i=(0,b.useState)(!1),c=(0,s.Z)(i,2),l=c[0],u=c[1],f=(0,Qe.s0)();(0,b.useEffect)((function(){var t=function(){var t=(0,a.Z)(d().mark((function t(){var n,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u(!0),n={ids:encodeURIComponent(e("ids"))},t.next=5,Z.bl.timetable.list({params:n});case 5:r=t.sent,o(r.results),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,k.Am)({status:"error",content:t.t0});case 12:return t.prev=12,u(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var h=function(){var t=(0,a.Z)(d().mark((function t(){var n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=encodeURIComponent(e("ids")),t.next=4,Z.bl.profile.timetable.addShared({ids:n});case 4:(0,k.Am)({status:"success",content:"Successfully added to timetable"}),f("/timetable",{replace:!0}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),(0,k.Am)({status:"error",content:t.t0});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(k.CD,{children:[(0,R.jsx)(k.V1,{children:"Timetable (Shared)"}),(0,R.jsx)(k.xu,{type:"primary",htmlType:"submit",onClick:h,children:"Add to my timetable"})]}),l&&(0,R.jsx)(k.Tc,{}),(0,R.jsx)(g.Z,{spinning:l,indicator:(0,R.jsx)(m.Z,{style:{fontSize:24},spin:!0}),children:(0,R.jsxs)(re,{children:[r.map((function(e){return(0,R.jsx)(q,{data:e},e.id)})),(0,R.jsx)(z,{mode:"vertical"})]})}),(0,R.jsx)(k.xN,{})]})},Xe=n(4942),qe=n(9292),_e=n(1958),Je=function(e){var t=e.data,n=(0,j.I0)(),r=(0,j.v9)(E.CC),o=(0,b.useState)(!1),i=(0,s.Z)(o,2),c=i[0],l=i[1],u=(0,b.useState)(null),m=(0,s.Z)(u,2),f=m[0],h=m[1];(0,b.useEffect)((function(){h(t.reduce((function(e,t){var n,o;return null!==(o=t,n=r.reduce((function(e,t){return t===o.id?o:e}),null))&&void 0!==n?n:e}),null))}),[r,t]);var p=function(e){return(0,a.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l(!0),!f){t.next=7;break}return t.next=5,Z.bl.profile.timetable.remove({id:e});case 5:t.next=9;break;case 7:return t.next=9,Z.bl.profile.timetable.add({id:e});case 9:n((0,E.Fp)(e)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),(0,k.Am)({status:"error",content:t.t0});case 15:return t.prev=15,l(!1),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[0,12,15,18]])})))};return t.length>1&&null===f?(0,R.jsx)(Y.Z,{trigger:["click"],overlay:(0,R.jsx)(W.Z,{theme:"dark",children:t.map((function(e){var t=e.id,n=e.division;return(0,R.jsx)(W.Z.Item,{onClick:p(t),children:n},t)}))}),children:(0,R.jsx)(k.ik,{type:"primary",$active:null!==f,icon:(0,R.jsx)(qe.f,{size:"16"}),loading:c,style:{margin:"0.75rem 0 0",width:"100%"},children:null!==f?"Remove ".concat(f.division):(0,R.jsxs)($e,{children:["Timetable",(0,R.jsx)(_e._,{size:"16"})]})})}):(0,R.jsx)(k.ik,{type:"primary",$active:null!==f,icon:(0,R.jsx)(qe.f,{size:"16"}),onClick:p(f?f.id:t[0].id),loading:c,style:{margin:"0.75rem 0 0",width:"100%"},children:null!==f?(0,R.jsxs)("span",{style:{textOverflow:"ellipsis",overflow:"hidden"},children:["Remove from: ",(0,R.jsx)("b",{children:f.division})]}):"Timetable"})},Ge=["autumn","spring"],We=function(e){var t=e.semester,n=(0,j.v9)(T.Lw),r=Ge.reduce((function(e,n){var r,o;return(0,se.Z)((0,se.Z)({},e),{},(0,Xe.Z)({},n,null!==(r=null===(o=t.find((function(e){return e.season===n})))||void 0===o?void 0:o.timetable)&&void 0!==r?r:[]))}),{});if(!r.spring.length&&!r.autumn.length)return(0,R.jsx)(Ye,{style:{margin:0,opacity:.8},children:"Timetable entry not found"});var o=null===n||void 0===n?void 0:n.season;return r[o].length||(o=Ge.find((function(e){return e!==o}))),(0,R.jsxs)(k.mQ,{tabheight:"1.75rem",tabwidth:"6.5rem",defaultActiveKey:o,children:[(0,R.jsx)(k.mQ.TabPane,{tab:"Autumn",disabled:!r.autumn.length,children:(0,R.jsx)(Je,{semester:"autumn",data:r.autumn})},"autumn"),(0,R.jsx)(k.mQ.TabPane,{tab:"Spring",disabled:!r.spring.length,children:(0,R.jsx)(Je,{semester:"spring",data:r.spring})},"spring")]})},Ye=l.ZP.p.withConfig({componentId:"sc-1e0z8fo-0"})(["display:block;margin:0 0.25rem 0.25rem;color:",";font-weight:400;font-size:0.75rem;letter-spacing:1.5px;"],(function(e){return e.theme.textColor})),$e=l.ZP.div.withConfig({componentId:"sc-1e0z8fo-1"})(["display:flex;align-items:center;justify-content:space-between;width:100%;"])},6647:function(e,t,n){n.d(t,{y6:function(){return r},ik:function(){return o},hM:function(){return l}});var r=[{id:"col-1",title:"Monday"},{id:"col-2",title:"Tuesday"},{id:"col-3",title:"Wednesday"},{id:"col-4",title:"Thursday"},{id:"col-5",title:"Friday"}],o=[{id:"time-0830",title:"08:30"},{id:"time-0900",title:"09:00"},{id:"time-0930",title:"09:30"},{id:"time-1000",title:"10:00"},{id:"time-1030",title:"10:30"},{id:"time-1100",title:"11:00"},{id:"time-1130",title:"11:30"},{id:"time-1200",title:"12:00"},{id:"time-1230",title:"12:30"},{id:"time-1400",title:"14:00"},{id:"time-1430",title:"14:30"},{id:"time-1500",title:"15:00"},{id:"time-1530",title:"15:30"},{id:"time-1600",title:"16:00"},{id:"time-1630",title:"16:30"},{id:"time-1700",title:"17:00"},{id:"time-1730",title:"17:30"},{id:"time-1800",title:"18:00"},{id:"time-1830",title:"18:30"},{id:"time-1900",title:"19:00"},{id:"time-1930",title:"19:30"},{id:"time-2000",title:"20:00"},{id:"time-2030",title:"20:30"},{id:"time-2100",title:"21:00"},{id:"time-2130",title:"21:30"},{id:"time-2200",title:"22:00"}],i=n(1413),c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{col:t[0].col,row:{start:t.map((function(e){return e.row.start})).reduce((function(e,t){return Math.min(e,t)})),end:t.map((function(e){return e.row.end})).reduce((function(e,t){return Math.max(e,t)}))}}},a={"1A":{col:1,row:{start:0,end:2}},"1B":{col:2,row:{start:2,end:4}},"1C":{col:4,row:{start:4,end:6}},"2A":{col:1,row:{start:2,end:4}},"2B":{col:2,row:{start:4,end:6}},"2C":{col:4,row:{start:6,end:8}},"3A":{col:1,row:{start:4,end:6}},"3B":{col:2,row:{start:6,end:8}},"3C":{col:4,row:{start:0,end:2}},"4A":{col:1,row:{start:6,end:8}},"4B":{col:2,row:{start:0,end:2}},"4C":{col:4,row:{start:2,end:4}},"5A":{col:3,row:{start:2,end:5}},"5B":{col:5,row:{start:2,end:5}},"6A":{col:3,row:{start:5,end:8}},"6B":{col:5,row:{start:5,end:8}},"7A":{col:3,row:{start:0,end:2}},"7B":{col:5,row:{start:0,end:2}},"8A":{col:1,row:{start:9,end:12}},"8B":{col:4,row:{start:9,end:12}},"9A":{col:1,row:{start:12,end:15}},"9B":{col:4,row:{start:12,end:15}},"10A":{col:2,row:{start:9,end:12}},"10B":{col:5,row:{start:9,end:12}},"11A":{col:2,row:{start:12,end:15}},"11B":{col:5,row:{start:12,end:15}},"12A":{col:1,row:{start:16,end:19}},"12B":{col:4,row:{start:16,end:19}},"13A":{col:1,row:{start:19,end:22}},"13B":{col:4,row:{start:19,end:22}},"14A":{col:2,row:{start:16,end:19}},"14B":{col:5,row:{start:16,end:19}},"15A":{col:2,row:{start:19,end:22}},"15B":{col:5,row:{start:19,end:22}},X1:{col:3,row:{start:9,end:11}},X2:{col:3,row:{start:11,end:13}},X3:{col:3,row:{start:13,end:15}},XC:{col:3,row:{start:16,end:19}},XD:{col:3,row:{start:19,end:22}}},s={L1:c(a["8A"],a["9A"]),L2:c(a["10A"],a["11A"]),L3:c(a["8B"],a["9B"]),L4:c(a["10B"],a["11B"]),L5:c(a["5A"],a["6A"]),L6:c(a["5B"],a["6B"]),LX:c(a.X1,a.X2,a.X3)},l=(0,i.Z)((0,i.Z)({},a),s)}}]);
//# sourceMappingURL=681.6e3188de.chunk.js.map