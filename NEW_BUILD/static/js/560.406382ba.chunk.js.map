{"version":3,"file":"static/js/560.406382ba.chunk.js","mappings":"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","sources":["components/Contribute/ContributeForm.jsx","components/Contribute/fileDetails.jsx","components/Contribute/DragNDrop.jsx","components/Contribute/ContributeItem.jsx","components/Contribute/ContributeContainer.jsx","pages/Contribute.jsx"],"sourcesContent":["import { Button, Input, Select } from 'antd'\nimport { useEffect, useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport styled from 'styled-components/macro'\n\nimport { ButtonSquare, Form, toast } from 'components/shared'\nimport { API } from 'config/api'\nimport tags from 'data/tags.json'\nimport { useQueryString } from 'hooks'\nimport { selectCourseListMinified } from 'store/courseSlice'\n\nconst ContributeForm = ({ fileItem, handleUpload, handleDelete }) => {\n  const [profList, setProfList] = useState([\n    { value: 'null', label: \"don't know\" },\n  ])\n  const [moduleList, setModuleList] = useState([\n    { value: 'null', label: \"don't know\" },\n  ])\n  const currentYear = new Date().getFullYear()\n  const yearsAllowed = [\n    { value: 0, label: \"don't know\" },\n    { value: currentYear - 2, label: currentYear - 2 },\n    { value: currentYear - 1, label: currentYear - 1 },\n    { value: currentYear, label: currentYear },\n  ]\n  const { getQueryString } = useQueryString()\n  const course = getQueryString('course')\n\n  const tagOptions = tags.resourceTags.map((tag) => ({\n    label: tag,\n    value: tag,\n  }))\n\n  const courseListMinified = useSelector(selectCourseListMinified)\n  const courseOptions = courseListMinified.map(({ code, title }) => ({\n    label: `${code}: ${title}`,\n    value: code,\n  }))\n\n  const handleCourseChange = (course_) => {\n    const fetchProfs = async () => {\n      const profSetFormat = [{ value: 'null', label: \"don't know\" }]\n      const moduleSetFormat = [{ value: 'null', label: \"don't know\" }]\n      try {\n        const profSet = await API.professors.read({ code: course_ })\n        // assert that a course definitely has profs associated with it\n\n        profSet.professors?.forEach((entry) => {\n          profSetFormat.push({ value: entry, label: entry })\n        })\n        if (profSet.modules.length !== 0) {\n          profSet.modules?.forEach((entry) => {\n            moduleSetFormat.push({ value: entry, label: entry })\n          })\n        }\n      } catch (error) {\n        toast({ status: 'error', content: error })\n      }\n      // setSelectedProf(\"\")\n      // setSelectedModule(\"\")\n      setModuleList(moduleSetFormat)\n      setProfList(profSetFormat)\n    }\n    fetchProfs()\n  }\n\n  useEffect(() => {\n    if (course) {\n      handleCourseChange(course)\n    }\n  }, [])\n\n  const [form] = Form.useForm()\n\n  return (\n    <Form\n      form={form}\n      name=\"contribute\"\n      onFinish={handleUpload}\n      layout=\"vertical\"\n      initialValues={{ ...fileItem.details, course }}\n    >\n      <Form.Item\n        name=\"title\"\n        rules={[\n          { required: true, message: 'Title is required.' },\n          { min: 5, message: 'Title must be atleast 5 characters.' },\n          { max: 100, message: 'Title must be atmost 100 characters.' },\n        ]}\n      >\n        <Input placeholder=\"Title\" />\n      </Form.Item>\n\n      <Form.Item\n        name=\"course\"\n        rules={[\n          {\n            required: true,\n            message: 'This is a required field. Choose a course.',\n          },\n        ]}\n      >\n        <Select\n          showSearch\n          placeholder=\"Course\"\n          options={courseOptions}\n          onChange={handleCourseChange}\n        />\n      </Form.Item>\n\n      <Form.Item\n        name=\"module\"\n        rules={[{ required: true, message: 'This is a required field.' }]}\n      >\n        <Select showSearch placeholder=\"Module\" options={moduleList} />\n      </Form.Item>\n\n      <Form.Item\n        name=\"author\"\n        rules={[{ required: true, message: 'This is a required field.' }]}\n      >\n        {/* <Select showSearch placeholder=\"Professor\" options={profList} value={selectedProf} onChange={setSelectedProf}/> */}\n        <Select showSearch placeholder=\"Professor\" options={profList} />\n      </Form.Item>\n\n      <Form.Item\n        name=\"year\"\n        rules={[{ required: true, message: 'This is a required field.' }]}\n      >\n        <Select showSearch placeholder=\"Year\" options={yearsAllowed} />\n      </Form.Item>\n\n      <Form.Item\n        name=\"tags\"\n        rules={[\n          {\n            required: true,\n            message: 'This is a required field. Select the applicable tags.',\n          },\n        ]}\n      >\n        <Select\n          // mode=\"tags\"\n          mode=\"multiple\"\n          placeholder=\"Add tags\"\n          showArrow\n          // tokenSeparators={[',']}\n          options={tagOptions}\n        />\n      </Form.Item>\n\n      <ButtonContainer>\n        <ButtonSquare\n          type=\"primary\"\n          htmlType=\"submit\"\n          loading={fileItem.status === 'uploading'}\n        >\n          Submit\n        </ButtonSquare>\n\n        <Button\n          type=\"primary\"\n          danger\n          onClick={handleDelete}\n          hidden={fileItem.status === 'uploading'}\n          style={{ borderRadius: '0.5rem' }}\n        >\n          Delete\n        </Button>\n      </ButtonContainer>\n    </Form>\n  )\n}\n\nexport default ContributeForm\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n`\n","// ? acceptable file types\n// * icons: https://www.flaticon.com/packs/file-types\nexport const fileTypes = [\n  {\n    type: 'application/msword',\n    extention: 'doc',\n    icon: 'https://image.flaticon.com/icons/svg/136/136521.svg',\n  },\n  {\n    type: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n    extention: 'docx',\n    icon: 'https://image.flaticon.com/icons/svg/136/136521.svg',\n  },\n  {\n    type: 'application/pdf',\n    extention: 'pdf',\n    icon: 'https://image.flaticon.com/icons/svg/136/136522.svg',\n  },\n  {\n    type: 'application/vnd.ms-powerpoint',\n    extention: 'ppt',\n    icon: 'https://image.flaticon.com/icons/svg/136/136543.svg',\n  },\n  {\n    type: 'application/zip',\n    extention: 'zip',\n    icon: 'https://image.flaticon.com/icons/svg/136/136544.svg',\n  },\n  {\n    type: 'application/x-zip-compressed',\n    extention: 'zip',\n    icon: 'https://image.flaticon.com/icons/svg/136/136549.svg',\n  },\n]\n\nexport const defaultFile = {\n  name: (\n    <div style={{ textAlign: 'center' }}>\n      <h3>Select a document</h3>\n      <code>({fileTypes.map((type) => `.${type.extention}`).join(', ')})</code>\n    </div>\n  ),\n  title: null,\n  description: null,\n  tags: [],\n  type: null,\n  extention: null,\n  icon: 'https://image.flaticon.com/icons/svg/136/136549.svg',\n  isValid: false,\n  size: null,\n  course: null,\n}\n\nconst printSize = (_size) => {\n  const sizes = ['Bytes', 'KB', 'MB', 'GB']\n  let i = 0\n  let size = _size\n\n  while (size > 900) {\n    size /= 1024\n    i += 1\n  }\n\n  return `${Math.round(size * 100) / 100} ${sizes[i]}`\n}\n\n// ? creates initial title for a file\n// * remove non letters and numbers and replace underscores with spaces\nconst getTitle = (fileName) =>\n  fileName\n    .replace(/\\.[^/.]+$/, '')\n    .replace(/[\\W_]+/g, ' ')\n    .trim()\n\nexport const getFileDetails = (file, initialState = {}) => {\n  if (!file) return defaultFile\n  const { name, type } = file\n  const fileType = fileTypes.find(\n    (item) => item.type === type || name.endsWith('.zip')\n  )\n  if (!fileType) return { ...defaultFile, name }\n\n  return {\n    ...defaultFile,\n    ...initialState,\n    name,\n    title: getTitle(name),\n    type,\n    extention: name.split('.').pop().toLowerCase(),\n    icon: fileType.icon,\n    isValid: true,\n    size: printSize(file.size),\n  }\n}\n","import { CloudUpload } from '@styled-icons/heroicons-outline'\nimport { lighten, rgba } from 'polished'\nimport { useDropzone } from 'react-dropzone'\nimport styled from 'styled-components/macro'\n\nimport { device, fontSize } from 'styles/responsive'\n\nimport { fileTypes } from './fileDetails'\n\nconst dropzoneProps = {\n  accept: fileTypes.map((file) => file.type),\n  maxSize: 30 * 1024 * 1024, // ? 30MB\n  minSize: 3 * 1024, // ? 3KB\n}\n\nexport const DragNDropSub = ({ onDrop, children }) => {\n  const { getRootProps, getInputProps, isDragActive, isDragReject } =\n    useDropzone({ maxFiles: 1, onDrop, ...dropzoneProps })\n\n  let message = children\n  if (isDragActive) {\n    if (isDragReject) message = <h2>File too large or invalid upload format</h2>\n    else message = <h2>Drop files here</h2>\n  }\n\n  return (\n    <UploadBoxSub {...getRootProps()} error={isDragReject}>\n      <input {...getInputProps()} />\n\n      {message}\n    </UploadBoxSub>\n  )\n}\n\nconst DragNDrop = ({ onDrop, children }) => {\n  const { getRootProps, getInputProps, isDragActive, isDragReject } =\n    useDropzone({ onDrop, ...dropzoneProps })\n\n  let message = null\n  if (!isDragActive)\n    message = (\n      <h2>\n        Drag & drop to upload\n        <br />\n        or click to browse files\n      </h2>\n    )\n  else if (isDragReject) message = <h2>Invalid upload format</h2>\n  else message = <h2>Drop files here</h2>\n\n  return (\n    <UploadBox {...getRootProps()} error={isDragReject}>\n      <input {...getInputProps()} />\n      <CloudUpload size=\"60\" />\n      {message}\n      <span>\n        Accepted formats: .pdf, .doc, .ppt, .zip\n        <br />\n        Maximum upload file size: 30MB\n      </span>\n    </UploadBox>\n  )\n}\n\nexport default DragNDrop\n\nconst UploadBox = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 16rem;\n  margin-bottom: 1rem;\n  padding: 3rem 1rem;\n  color: ${({ theme, error }) => (error ? '#f34a4a' : theme.textColorInactive)};\n  background: ${({ theme }) => theme.secondary};\n  border-radius: ${({ theme }) => theme.borderRadius};\n  outline: 3px dashed ${({ theme }) => rgba(theme.textColorInactive, 0.4)};\n  outline-offset: -0.75rem;\n  cursor: pointer;\n\n  h2 {\n    font-size: ${fontSize.responsive.md};\n  }\n\n  &:hover {\n    color: ${({ theme }) => theme.textColor};\n    background: ${({ theme }) => lighten(0.1, theme.secondary)};\n    outline-color: ${({ theme }) => theme.textColorInactive};\n  }\n`\n\nconst UploadBoxSub = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  align-items: center;\n  justify-content: center;\n  width: 15rem;\n  height: initial;\n  padding: 1.5rem 1rem;\n  color: ${({ theme, error }) => (error ? '#f34a4a' : theme.textColorInactive)};\n  background: ${({ theme }) => theme.secondary};\n  border-radius: ${({ theme }) => theme.borderRadius};\n  outline: 3px dashed ${({ theme }) => rgba(theme.textColorInactive, 0.4)};\n  outline-offset: -0.75rem;\n  cursor: pointer;\n\n  h2 {\n    font-size: ${fontSize.static.xs};\n    text-align: center;\n  }\n\n  &:hover {\n    color: ${({ theme }) => theme.textColor};\n    background: ${({ theme }) => lighten(0.1, theme.secondary)};\n    outline-color: ${({ theme }) => theme.textColorInactive};\n  }\n\n  @media ${device.max.xs} {\n    width: 100%;\n    height: 11rem;\n    padding: 1rem;\n  }\n`\n","import { DocumentAdd } from '@styled-icons/heroicons-outline'\nimport { useSelector } from 'react-redux'\nimport styled from 'styled-components/macro'\n\nimport { LoaderAnimation, Progress, toast } from 'components/shared'\nimport { API } from 'config/api'\nimport { selectCourseAPILoading } from 'store/courseSlice'\nimport { device } from 'styles/responsive'\n\nimport ContributeForm from './ContributeForm'\nimport { DragNDropSub } from './DragNDrop'\nimport { getFileDetails } from './fileDetails'\n\nconst ContributeItem = ({\n  fileItem,\n  updateFileItem,\n  deleteFileItem,\n  addUploadedFile,\n}) => {\n  // ? If no file is valid, reset the file list item\n  const onDrop = (acceptedFiles, fileRejections) => {\n    fileRejections.forEach((file) => {\n      file.errors.forEach((err) => {\n        toast({\n          status: 'error',\n          content: err.message,\n        })\n      })\n    })\n\n    if (acceptedFiles.length !== 0)\n      updateFileItem({\n        file: acceptedFiles[0],\n        status: 'success',\n        details: getFileDetails(acceptedFiles[0]),\n      })\n  }\n\n  const onUploadProgress = (event) =>\n    updateFileItem({\n      progress: Math.round((100 * event.loaded) / event.total),\n    })\n\n  const handleUpload = async (fileDetails) => {\n    updateFileItem({ status: 'uploading' })\n\n    const MAX_FILE_SIZE = 26214400 // 25MB\n\n    if (!fileItem.file || fileItem.file.size > MAX_FILE_SIZE) {\n      updateFileItem({ status: 'error' })\n      return\n    }\n    // const { title, course, description, tags, author } = fileDetails\n\n    const { author, course, module, tags, title, year } = fileDetails\n    const fd = new FormData()\n    fd.append('file', fileItem.file, fileItem.file.name)\n    fd.append('title', title)\n    fd.append('author', author)\n    fd.append('course', course)\n    fd.append('description', 'No description available.')\n    fd.append('year', parseInt(year, 10))\n    fd.append('modules', module)\n    fd.append('tags', JSON.stringify(tags))\n    try {\n      // const response = await API.resources.create({\n      //   payload: fd,\n      //   onUploadProgress,\n      // })\n      // addUploadedFile(response)\n      await API.resources.create({ payload: fd, onUploadProgress })\n\n      deleteFileItem()\n      toast({\n        status: 'success',\n        content:\n          'Resource uploaded successfully! Pending moderator approval (1-2 days).',\n      })\n    } catch (error) {\n      if (error.includes('409')) {\n        toast({ status: 'error', content: 'Similar File Already Exists!' })\n      } else {\n        toast({ status: 'error', content: error })\n      }\n      updateFileItem({ status: 'error', progress: 0 })\n    }\n  }\n\n  const APILoading = useSelector(selectCourseAPILoading)\n  if (APILoading) return <LoaderAnimation />\n\n  return (\n    <ItemContainer>\n      <DragNDropSub onDrop={onDrop}>\n        <DocumentAdd size=\"24\" />\n\n        <h2>\n          {fileItem.details.name}\n          <br />\n          {fileItem.details.size && (\n            <small>{` (${fileItem.details.size})`}</small>\n          )}\n        </h2>\n\n        {fileItem.progress > 0 && (\n          <Progress\n            size=\"small\"\n            percent={fileItem.progress}\n            style={{\n              top: '10px',\n              marginTop: '-10px',\n            }}\n          />\n        )}\n      </DragNDropSub>\n\n      <ContributeForm\n        fileItem={fileItem}\n        handleUpload={handleUpload}\n        handleDelete={deleteFileItem}\n      />\n    </ItemContainer>\n  )\n}\n\nexport default ContributeItem\n\nconst ItemContainer = styled.div`\n  display: flex;\n  gap: 1rem;\n  padding: 1rem 0.75rem;\n  background: ${({ theme }) => theme.secondary};\n  border-radius: ${({ theme }) => theme.borderRadius};\n\n  @media ${device.max.xs} {\n    flex-direction: column;\n    padding: 1rem 0.75rem;\n  }\n`\n","import { nanoid } from 'nanoid'\nimport { useCallback, useEffect, useState } from 'react'\nimport styled from 'styled-components/macro'\n\n// import { CourseResourceGrid } from 'components/CourseResource'\nimport {\n  Aside,\n  Divider,\n  PageHeading,\n  PageTitle,\n  toast,\n} from 'components/shared'\n// import { API } from 'config/api'\n\nimport ContributeItem from './ContributeItem'\nimport DragNDrop from './DragNDrop'\nimport { getFileDetails } from './fileDetails'\n\nconst ContributeContainer = ({ visible, setVisible }) => {\n  const [filesSelected, setFilesSelected] = useState([])\n  // const [uploadedFiles, setUploadedFiles] = useState([])\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    const fetchUserResources = async () => {\n      try {\n        setLoading(true)\n        // const response = await API.profile.resources.list()\n        // setUploadedFiles(response)\n      } catch (error) {\n        toast({ status: 'error', content: error })\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchUserResources()\n  }, [])\n\n  const updateFileItem = (id) => (fileItem) => {\n    setFilesSelected((prevItems) =>\n      prevItems.map((item) =>\n        item.id === id ? { ...item, ...fileItem } : item\n      )\n    )\n  }\n\n  const deleteFileItem = (id) => () =>\n    setFilesSelected((prevItems) => prevItems.filter((item) => item.id !== id))\n\n  // const addUploadedFile = (file) =>\n  //   setUploadedFiles((prevItems) => [file, ...prevItems])\n\n  const onDrop = useCallback((acceptedFiles, fileRejections) => {\n    fileRejections.forEach((file) => {\n      file.errors.forEach((err) => {\n        toast({\n          status: 'error',\n          content: err.message,\n        })\n      })\n    })\n\n    acceptedFiles.forEach((file) => {\n      const fileItem = {\n        id: nanoid(),\n        status: null,\n        progress: 0,\n        file,\n        details: getFileDetails(file),\n      }\n\n      setFilesSelected((prevItems) => [...prevItems, fileItem])\n    })\n  }, [])\n\n  return (\n    <>\n      <PageHeading>\n        <PageTitle>Contribute</PageTitle>\n      </PageHeading>\n\n      <DragNDrop onDrop={onDrop} />\n\n      {filesSelected.length > 0 && (\n        <FileList>\n          <Divider orientation=\"left\">Files selected</Divider>\n\n          {filesSelected.map((fileItem) => (\n            <ContributeItem\n              key={fileItem.id}\n              fileItem={fileItem}\n              updateFileItem={updateFileItem(fileItem.id)}\n              deleteFileItem={deleteFileItem(fileItem.id)}\n              // addUploadedFile={addUploadedFile}\n            />\n          ))}\n        </FileList>\n      )}\n\n      <Aside title=\"Instructions\" loading={loading}>\n        {/* <CourseResourceGrid items={uploadedFiles} /> */}\n        <InstructionContainer>\n          <ul\n            style={{\n              paddingLeft: '1rem',\n            }}\n          >\n            <Lis>\n              Please ensure that the resources you upload are not dupscates of\n              existing resources.\n            </Lis>\n            <Lis>\n              Please name the files sensibly. Avoid using the course nsame,\n              professor name, year, your name, roll number, etc in the file\n              <span>&#39;</span>s name. Convert the files to pdf if possible.\n            </Lis>\n            <Lis>\n              Select the year, professor name and module name as applicsable. If\n              there is no module available, please reach out to us. Providing\n              this data helps us serve these resources in an organized way.\n            </Lis>\n            <Lis>\n              Files larger than 30MB cannot be uploaded through the portal. If\n              you have larger files, please send them to us via email.\n            </Lis>\n          </ul>\n          For any queries, reach out to us at devcom@iitb.ac.in\n          <br />\n          Thank you\n        </InstructionContainer>\n      </Aside>\n    </>\n  )\n}\n\nexport default ContributeContainer\n\nconst FileList = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n`\nconst InstructionContainer = styled.div`\n  color: ${({ theme }) => theme.primary};\n  font-weight: 500;\n  font-size: 0.875rem;\n`\nconst Lis = styled.li`\n  list-style-type: disc;\n`\n","import { Helmet } from 'react-helmet-async'\n\nimport { ContributeContainer } from 'components/Contribute'\nimport { PageContainer } from 'components/shared'\n\nconst Contribute = () => {\n  return (\n    <PageContainer>\n      <Helmet>\n        <title>Contribute - ResoBin</title>\n        <meta name=\"description\" content=\"Upload and share your own notes\" />\n      </Helmet>\n\n      <ContributeContainer />\n    </PageContainer>\n  )\n}\n\nexport default Contribute\n"],"names":["fileItem","handleUpload","handleDelete","useState","value","label","profList","setProfList","moduleList","setModuleList","currentYear","Date","getFullYear","yearsAllowed","course","getQueryString","useQueryString","tagOptions","tags","tag","courseOptions","useSelector","selectCourseListMinified","map","code","title","handleCourseChange","course_","fetchProfs","profSetFormat","moduleSetFormat","API","profSet","professors","forEach","entry","push","modules","length","toast","status","content","useEffect","Form","form","name","onFinish","layout","initialValues","details","rules","required","message","min","max","placeholder","showSearch","options","onChange","mode","showArrow","ButtonContainer","type","htmlType","loading","danger","onClick","hidden","style","borderRadius","styled","fileTypes","extention","icon","defaultFile","textAlign","join","description","isValid","size","printSize","_size","i","Math","round","getTitle","fileName","replace","trim","getFileDetails","file","initialState","fileType","find","item","endsWith","split","pop","toLowerCase","dropzoneProps","accept","maxSize","minSize","DragNDropSub","onDrop","children","useDropzone","maxFiles","getRootProps","getInputProps","isDragActive","isDragReject","UploadBoxSub","error","UploadBox","theme","textColorInactive","secondary","rgba","fontSize","textColor","lighten","device","updateFileItem","deleteFileItem","onUploadProgress","addUploadedFile","event","progress","loaded","total","fileDetails","author","module","year","fd","FormData","append","parseInt","JSON","stringify","payload","includes","selectCourseAPILoading","ItemContainer","acceptedFiles","fileRejections","errors","err","percent","top","marginTop","visible","setVisible","filesSelected","setFilesSelected","setLoading","fetchUserResources","id","prevItems","filter","useCallback","nanoid","FileList","orientation","InstructionContainer","paddingLeft","Lis","primary"],"sourceRoot":""}