"use strict";(self.webpackChunkresobin=self.webpackChunkresobin||[]).push([[560],{8560:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var r=n(6907),i=n(3433),o=n(1413),s=n(5861),a=n(9439),l=n(7691),c=n(4687),u=n.n(c),d=n(5984),p=n(2791),m=n(718),h=n(5493),f=n(6030),x=n(3997),g=n(4872),v=n(9411),j=n(177),y=n(7323),b=n(7309),Z=n(2565),w=n(1943),I=n(184),z=function(e){var t=e.fileItem,n=e.handleUpload,r=e.handleDelete,i=(0,p.useState)([{value:"null",label:"don't know"}]),l=(0,a.Z)(i,2),c=l[0],d=l[1],h=(0,p.useState)([{value:"null",label:"don't know"}]),v=(0,a.Z)(h,2),z=v[0],k=v[1],P=(new Date).getFullYear(),S=[{value:0,label:"don't know"},{value:P-2,label:P-2},{value:P-1,label:P-1},{value:P,label:P}],D=(0,(0,w.Nc)().getQueryString)("course"),q=Z.P.map((function(e){return{label:e,value:e}})),F=(0,f.v9)(g.t_).map((function(e){var t=e.code,n=e.title;return{label:"".concat(t,": ").concat(n),value:t}})),A=function(e){var t=function(){var t=(0,s.Z)(u().mark((function t(){var n,r,i,o,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[{value:"null",label:"don't know"}],r=[{value:"null",label:"don't know"}],t.prev=2,t.next=5,x.bl.professors.read({code:e});case 5:o=t.sent,null===(i=o.professors)||void 0===i||i.forEach((function(e){n.push({value:e,label:e})})),0!==o.modules.length&&(null===(s=o.modules)||void 0===s||s.forEach((function(e){r.push({value:e,label:e})}))),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),(0,m.Am)({status:"error",content:t.t0});case 13:k(r),d(n);case 15:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}();t()};(0,p.useEffect)((function(){D&&A(D)}),[]);var T=m.l0.useForm(),E=(0,a.Z)(T,1)[0];return(0,I.jsxs)(m.l0,{form:E,name:"contribute",onFinish:n,layout:"vertical",initialValues:(0,o.Z)((0,o.Z)({},t.details),{},{course:D}),children:[(0,I.jsx)(m.l0.Item,{name:"title",rules:[{required:!0,message:"Title is required."},{min:5,message:"Title must be atleast 5 characters."},{max:100,message:"Title must be atmost 100 characters."}],children:(0,I.jsx)(j.Z,{placeholder:"Title"})}),(0,I.jsx)(m.l0.Item,{name:"course",rules:[{required:!0,message:"This is a required field. Choose a course."}],children:(0,I.jsx)(y.Z,{showSearch:!0,placeholder:"Course",options:F,onChange:A})}),(0,I.jsx)(m.l0.Item,{name:"module",rules:[{required:!0,message:"This is a required field."}],children:(0,I.jsx)(y.Z,{showSearch:!0,placeholder:"Module",options:z})}),(0,I.jsx)(m.l0.Item,{name:"author",rules:[{required:!0,message:"This is a required field."}],children:(0,I.jsx)(y.Z,{showSearch:!0,placeholder:"Professor",options:c})}),(0,I.jsx)(m.l0.Item,{name:"year",rules:[{required:!0,message:"This is a required field."}],children:(0,I.jsx)(y.Z,{showSearch:!0,placeholder:"Year",options:S})}),(0,I.jsx)(m.l0.Item,{name:"tags",rules:[{required:!0,message:"This is a required field. Select the applicable tags."}],children:(0,I.jsx)(y.Z,{mode:"multiple",placeholder:"Add tags",showArrow:!0,options:q})}),(0,I.jsxs)(C,{children:[(0,I.jsx)(m.xu,{type:"primary",htmlType:"submit",loading:"uploading"===t.status,children:"Submit"}),(0,I.jsx)(b.Z,{type:"primary",danger:!0,onClick:r,hidden:"uploading"===t.status,style:{borderRadius:"0.5rem"},children:"Delete"})]})]})},C=l.ZP.div.withConfig({componentId:"sc-1pzhynn-0"})(["display:flex;gap:1rem;align-items:center;"]),k=n(5823),P=n(5606),S=n(5532),D=[{type:"application/msword",extention:"doc",icon:"https://image.flaticon.com/icons/svg/136/136521.svg"},{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",extention:"docx",icon:"https://image.flaticon.com/icons/svg/136/136521.svg"},{type:"application/pdf",extention:"pdf",icon:"https://image.flaticon.com/icons/svg/136/136522.svg"},{type:"application/vnd.ms-powerpoint",extention:"ppt",icon:"https://image.flaticon.com/icons/svg/136/136543.svg"},{type:"application/zip",extention:"zip",icon:"https://image.flaticon.com/icons/svg/136/136544.svg"},{type:"application/x-zip-compressed",extention:"zip",icon:"https://image.flaticon.com/icons/svg/136/136549.svg"}],q={name:(0,I.jsxs)("div",{style:{textAlign:"center"},children:[(0,I.jsx)("h3",{children:"Select a document"}),(0,I.jsxs)("code",{children:["(",D.map((function(e){return".".concat(e.extention)})).join(", "),")"]})]}),title:null,description:null,tags:[],type:null,extention:null,icon:"https://image.flaticon.com/icons/svg/136/136549.svg",isValid:!1,size:null,course:null},F=function(e){for(var t=0,n=e;n>900;)n/=1024,t+=1;return"".concat(Math.round(100*n)/100," ").concat(["Bytes","KB","MB","GB"][t])},A=function(e){return e.replace(/\.[^/.]+$/,"").replace(/[\W_]+/g," ").trim()},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return q;var n=e.name,r=e.type,i=D.find((function(e){return e.type===r||n.endsWith(".zip")}));return i?(0,o.Z)((0,o.Z)((0,o.Z)({},q),t),{},{name:n,title:A(n),type:r,extention:n.split(".").pop().toLowerCase(),icon:i.icon,isValid:!0,size:F(e.size)}):(0,o.Z)((0,o.Z)({},q),{},{name:n})},E={accept:D.map((function(e){return e.type})),maxSize:31457280,minSize:3072},R=function(e){var t=e.onDrop,n=e.children,r=(0,S.uI)((0,o.Z)({maxFiles:1,onDrop:t},E)),i=r.getRootProps,s=r.getInputProps,a=r.isDragActive,l=r.isDragReject,c=n;return a&&(c=l?(0,I.jsx)("h2",{children:"File too large or invalid upload format"}):(0,I.jsx)("h2",{children:"Drop files here"})),(0,I.jsxs)(U,(0,o.Z)((0,o.Z)({},i()),{},{error:l,children:[(0,I.jsx)("input",(0,o.Z)({},s())),c]}))},B=function(e){var t=e.onDrop,n=(e.children,(0,S.uI)((0,o.Z)({onDrop:t},E))),r=n.getRootProps,i=n.getInputProps,s=n.isDragActive,a=n.isDragReject,l=null;return l=s?a?(0,I.jsx)("h2",{children:"Invalid upload format"}):(0,I.jsx)("h2",{children:"Drop files here"}):(0,I.jsxs)("h2",{children:["Drag & drop to upload",(0,I.jsx)("br",{}),"or click to browse files"]}),(0,I.jsxs)(M,(0,o.Z)((0,o.Z)({},r()),{},{error:a,children:[(0,I.jsx)("input",(0,o.Z)({},i())),(0,I.jsx)(k.n,{size:"60"}),l,(0,I.jsxs)("span",{children:["Accepted formats: .pdf, .doc, .ppt, .zip",(0,I.jsx)("br",{}),"Maximum upload file size: 30MB"]})]}))},M=l.ZP.div.withConfig({componentId:"sc-1d5quly-0"})(["display:flex;flex-direction:column;gap:1rem;align-items:center;justify-content:center;width:100%;height:16rem;margin-bottom:1rem;padding:3rem 1rem;color:",";background:",";border-radius:",";outline:3px dashed ",";outline-offset:-0.75rem;cursor:pointer;h2{font-size:",";}&:hover{color:",";background:",";outline-color:",";}"],(function(e){var t=e.theme;return e.error?"#f34a4a":t.textColorInactive}),(function(e){return e.theme.secondary}),(function(e){return e.theme.borderRadius}),(function(e){var t=e.theme;return(0,P.m4)(t.textColorInactive,.4)}),v.JB.responsive.md,(function(e){return e.theme.textColor}),(function(e){var t=e.theme;return(0,P.$n)(.1,t.secondary)}),(function(e){return e.theme.textColorInactive})),U=l.ZP.div.withConfig({componentId:"sc-1d5quly-1"})(["display:flex;flex-direction:column;gap:0.5rem;align-items:center;justify-content:center;width:15rem;height:initial;padding:1.5rem 1rem;color:",";background:",";border-radius:",";outline:3px dashed ",";outline-offset:-0.75rem;cursor:pointer;h2{font-size:",";text-align:center;}&:hover{color:",";background:",";outline-color:",";}@media ","{width:100%;height:11rem;padding:1rem;}"],(function(e){var t=e.theme;return e.error?"#f34a4a":t.textColorInactive}),(function(e){return e.theme.secondary}),(function(e){return e.theme.borderRadius}),(function(e){var t=e.theme;return(0,P.m4)(t.textColorInactive,.4)}),v.JB.static.xs,(function(e){return e.theme.textColor}),(function(e){var t=e.theme;return(0,P.$n)(.1,t.secondary)}),(function(e){return e.theme.textColorInactive}),v.Uh.max.xs),N=function(e){var t=e.fileItem,n=e.updateFileItem,r=e.deleteFileItem,i=(e.addUploadedFile,function(e){return n({progress:Math.round(100*e.loaded/e.total)})}),o=function(){var e=(0,s.Z)(u().mark((function e(o){var s,a,l,c,d,p,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n({status:"uploading"}),26214400,t.file&&!(t.file.size>26214400)){e.next=5;break}return n({status:"error"}),e.abrupt("return");case 5:return s=o.author,a=o.course,l=o.module,c=o.tags,d=o.title,p=o.year,(h=new FormData).append("file",t.file,t.file.name),h.append("title",d),h.append("author",s),h.append("course",a),h.append("description","No description available."),h.append("year",parseInt(p,10)),h.append("modules",l),h.append("tags",JSON.stringify(c)),e.prev=15,e.next=18,x.bl.resources.create({payload:h,onUploadProgress:i});case 18:r(),(0,m.Am)({status:"success",content:"Resource uploaded successfully! Pending moderator approval (1-2 days)."}),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(15),e.t0.includes("409")?(0,m.Am)({status:"error",content:"Similar File Already Exists!"}):(0,m.Am)({status:"error",content:e.t0}),n({status:"error",progress:0});case 26:case"end":return e.stop()}}),e,null,[[15,22]])})));return function(t){return e.apply(this,arguments)}}();return(0,f.v9)(g.Fp)?(0,I.jsx)(m.Tc,{}):(0,I.jsxs)(V,{children:[(0,I.jsxs)(R,{onDrop:function(e,t){t.forEach((function(e){e.errors.forEach((function(e){(0,m.Am)({status:"error",content:e.message})}))})),0!==e.length&&n({file:e[0],status:"success",details:T(e[0])})},children:[(0,I.jsx)(h.k,{size:"24"}),(0,I.jsxs)("h2",{children:[t.details.name,(0,I.jsx)("br",{}),t.details.size&&(0,I.jsx)("small",{children:" (".concat(t.details.size,")")})]}),t.progress>0&&(0,I.jsx)(m.Ex,{size:"small",percent:t.progress,style:{top:"10px",marginTop:"-10px"}})]}),(0,I.jsx)(z,{fileItem:t,handleUpload:o,handleDelete:r})]})},V=l.ZP.div.withConfig({componentId:"sc-1lx9nzq-0"})(["display:flex;gap:1rem;padding:1rem 0.75rem;background:",";border-radius:",";@media ","{flex-direction:column;padding:1rem 0.75rem;}"],(function(e){return e.theme.secondary}),(function(e){return e.theme.borderRadius}),v.Uh.max.xs),J=function(e){e.visible,e.setVisible;var t=(0,p.useState)([]),n=(0,a.Z)(t,2),r=n[0],l=n[1],c=(0,p.useState)(!1),h=(0,a.Z)(c,2),f=h[0],x=h[1];(0,p.useEffect)((function(){var e=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{x(!0)}catch(t){(0,m.Am)({status:"error",content:t})}finally{x(!1)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var g=function(e){return function(){return l((function(t){return t.filter((function(t){return t.id!==e}))}))}},v=(0,p.useCallback)((function(e,t){t.forEach((function(e){e.errors.forEach((function(e){(0,m.Am)({status:"error",content:e.message})}))})),e.forEach((function(e){var t={id:(0,d.x0)(),status:null,progress:0,file:e,details:T(e)};l((function(e){return[].concat((0,i.Z)(e),[t])}))}))}),[]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(m.CD,{children:(0,I.jsx)(m.V1,{children:"Contribute"})}),(0,I.jsx)(B,{onDrop:v}),r.length>0&&(0,I.jsxs)(L,{children:[(0,I.jsx)(m.iz,{orientation:"left",children:"Files selected"}),r.map((function(e){return(0,I.jsx)(N,{fileItem:e,updateFileItem:(t=e.id,function(e){l((function(n){return n.map((function(n){return n.id===t?(0,o.Z)((0,o.Z)({},n),e):n}))}))}),deleteFileItem:g(e.id)},e.id);var t}))]}),(0,I.jsx)(m.xN,{title:"Instructions",loading:f,children:(0,I.jsxs)(Y,{children:[(0,I.jsxs)("ul",{style:{paddingLeft:"1rem"},children:[(0,I.jsx)($,{children:"Please ensure that the resources you upload are not dupscates of existing resources."}),(0,I.jsxs)($,{children:["Please name the files sensibly. Avoid using the course nsame, professor name, year, your name, roll number, etc in the file",(0,I.jsx)("span",{children:"'"}),"s name. Convert the files to pdf if possible."]}),(0,I.jsx)($,{children:"Select the year, professor name and module name as applicsable. If there is no module available, please reach out to us. Providing this data helps us serve these resources in an organized way."}),(0,I.jsx)($,{children:"Files larger than 30MB cannot be uploaded through the portal. If you have larger files, please send them to us via email."})]}),"For any queries, reach out to us at devcom@iitb.ac.in",(0,I.jsx)("br",{}),"Thank you"]})})]})},L=l.ZP.div.withConfig({componentId:"sc-zig5n8-0"})(["display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem;"]),Y=l.ZP.div.withConfig({componentId:"sc-zig5n8-1"})(["color:",";font-weight:500;font-size:0.875rem;"],(function(e){return e.theme.primary})),$=l.ZP.li.withConfig({componentId:"sc-zig5n8-2"})(["list-style-type:disc;"]),_=function(){return(0,I.jsxs)(m._z,{children:[(0,I.jsxs)(r.ql,{children:[(0,I.jsx)("title",{children:"Contribute - ResoBin"}),(0,I.jsx)("meta",{name:"description",content:"Upload and share your own notes"})]}),(0,I.jsx)(J,{})]})}},2565:function(e){e.exports=JSON.parse('{"a":["Core","Elective","Lab","Minor","Non Credit","Project Stage 1","Project Stage 2","SEP courses","Seminar","Theory"],"P":["Slides","Textbooks","PYQs","Tutorials","Assignments","Labs","Misc"]}')}}]);
//# sourceMappingURL=560.406382ba.chunk.js.map